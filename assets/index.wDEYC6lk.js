import{r as $,j as n,B as y,P as f,T as j,F as B,a as S,G as x,b as v,M as q,c as O,d as h,e as F,f as P,g as R,R as T}from"./vendor.wY8wKw_1.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();const E="用户信息表单",M=[{name:"username",label:"用户名",type:"text",required:!0,minLength:3,maxLength:20,grid:{xs:12,sm:6}},{name:"email",label:"邮箱",type:"email",required:!0,grid:{xs:12,sm:6}},{name:"age",label:"年龄",type:"number",required:!0,min:18,max:100,grid:{xs:12,sm:4}},{name:"role",label:"角色",type:"select",required:!0,options:[{value:"user",label:"普通用户"},{value:"admin",label:"管理员"}],grid:{xs:12,sm:8}}],N={container:{spacing:2}},l={title:E,fields:M,layout:N},w=m=>{const o={};return m.forEach(e=>{let t;switch(e.type){case"email":t=h().email("请输入有效的邮箱地址");break;case"number":t=F();break;case"select":t=h();break;default:t=h()}e.required&&(t=t.required(`${e.label}是必填项`)),e.minLength&&(t=t.min(e.minLength,`${e.label}最少${e.minLength}个字符`)),e.maxLength&&(t=t.max(e.maxLength,`${e.label}最多${e.maxLength}个字符`)),e.type==="number"&&(e.min!==void 0&&(t=t.min(e.min,`${e.label}最小值为${e.min}`)),e.max!==void 0&&(t=t.max(e.max,`${e.label}最大值为${e.max}`))),o[e.name]=t}),P().shape(o)},I=()=>{const[m,o]=$.useState(null),e=l.fields.reduce((r,i)=>(r[i.name]="",r),{}),t=w(l.fields),s=(r,{setSubmitting:i})=>{setTimeout(()=>{o(r),i(!1)},500)};return n.jsx(y,{sx:{width:"100%",p:2},children:n.jsxs(f,{elevation:3,sx:{p:3},children:[n.jsx(j,{variant:"h5",gutterBottom:!0,children:l.title}),n.jsx(B,{initialValues:e,validationSchema:t,onSubmit:s,children:({values:r,errors:i,touched:c,handleChange:p,handleBlur:d,isSubmitting:L})=>{var g,b;return n.jsx(S,{children:n.jsxs(x,{container:!0,spacing:(b=(g=l.layout)==null?void 0:g.container)==null?void 0:b.spacing,children:[l.fields.map(a=>n.jsx(x,{item:!0,...a.grid||{xs:12},children:a.type==="select"?n.jsx(v,{select:!0,fullWidth:!0,name:a.name,label:a.label,value:r[a.name],onChange:p,onBlur:d,error:c[a.name]&&!!i[a.name],helperText:c[a.name]&&i[a.name],children:a.options.map(u=>n.jsx(q,{value:u.value,children:u.label},u.value))}):n.jsx(v,{fullWidth:!0,name:a.name,label:a.label,type:a.type,value:r[a.name],onChange:p,onBlur:d,error:c[a.name]&&!!i[a.name],helperText:c[a.name]&&i[a.name]})},a.name)),n.jsx(x,{item:!0,xs:12,children:n.jsx(O,{type:"submit",variant:"contained",color:"primary",disabled:L,fullWidth:!0,children:"提交"})})]})})}}),m&&n.jsxs(y,{sx:{mt:3},children:[n.jsx(j,{variant:"h6",gutterBottom:!0,children:"表单数据："}),n.jsx("pre",{children:JSON.stringify(m,null,2)})]})]})})};function W(){return n.jsx("div",{children:n.jsx(I,{})})}R.createRoot(document.getElementById("root")).render(n.jsx(T.StrictMode,{children:n.jsx(W,{})}));
//# sourceMappingURL=index.wDEYC6lk.js.map
